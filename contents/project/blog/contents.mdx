---
title: 개발 블로그 제작
subTitle: isSeo blog
duration: '2023.08 - 2023.09'
idx: 1
---

import { ProjectMainImage } from '@contents/components';
import { contents } from './contents';
export { skillTags } from './contents';

<ProjectMainImage contents={contents} />

## Project Info

- [배포 링크](https://blog.seo0h.me/ 'preview') | [Github Repo](https://github.com/Seo0H/seo0h.github.io 'preview')

### Summery | 요약

- 23년 8월 ~ 9월 간 진행한 개인 블로그 제작 프로젝트
- `mdx` 를 파싱하여 글을 작성하는 블로그

### Personal achievements | 개인 성과

- **조회수 기능** : 쿠키를 이용한 유저 검증, 서버 제작, Supabase 데이터베이스 구현, AWS E2C 와 Docker를 이용한 서버 배포
- **개인 도메인 적용** : API 통신을 위한 개인 도메인 적용. AWS Route 53 을 이용.
- **배포 CICD** : Github Pages를 이용한 Next.js 정적 배포 CI/CD 구현
- **MDX Parsing** : Contentlayer 을 이용한 mdx 파싱
- 글 태그 별 **필터링** 구현
- 기종별 반응형 대응 / SEO / GA
  <img src='/posts/blog/seo.png' className='print:hidden' />

---

## Trouble shooting | 문제 해결

### 1. 조회수 기능 구현

#### 요구사항 정의

- 지난 30분간 해당 글을 조회한 적이 없으면 조회수 1 증가, 조회한 적이 있으면 조회수 유지가 되어야 한다.

#### 요구사항 구체화 : 시퀀스 다이어그램

![요구사항을 구체화하기 위해 `Client`,`Server`, `DB` 의 상호작용을 시퀀스 다이어그램으로
  정리하였습니다.](/posts/blog/view_increment_design.png)

#### 구현 방식

- **Cookie를 이용한 유저 판별** : 30분간 유효한 cookie를 클라이언트에 제공해 30분 이내 재방문한 유저인지 아닌지 파악하였습니다.

  - 해당 기능을 구현하며 **서버에서 전달된 쿠키를 클라이언트에서 저장하지 못하는 이슈**가 있었습니다. 해당 문제를 해결하기 위해
    1.  개발 서버와 클라이언트 서버가 같은 상위 도메인을 가지도록 위치하도록 수정하였고
    2.  `Route 53`을 이용해 `SSL` 적용을 하였으며
    3.  서버의 응답 header에 `set-cookie=strict`, `secure=true`, `http-only=true` 속성을 적용하였습니다.

- **데이터베이스와 클라이언트의 데이터 정합성 검증** : 클라이언트에 mdx로 작성된 블로그 post 정보가 있었기에, 서버와 클라이트의 데이터 정합성을 블로그가 빌드되는 시기에 검증하도록 하였습니다.
  - **StaticPostData 싱글톤 클래스를 이용한 관리**: Blog Data가 서버와 클라이언트로 분리되어 있기에 두개의 상태를 합쳐 관리하는 `StaticPostData 싱글톤 클래스`를 구현해 유저에게 보여져야 할 블로그 Post의 정보를 모아 관리하도록 하였습니다. ([구현 코드 링크](https://github.com/Seo0H/seo0h.github.io/blob/027e730aa972a65287b172a4deb08aa4b8b73dea/src/constants/blogDataset/blogDataset.ts#L15))

### 2. Github pages에서 Next.js 정적 배포

Github Pages는 jekyll를 이용해 정적 배포됩니다. 그러나 Next.js는 node.js 환경 안에서 빌드되기 때문에, [Github Action을 이용해 Node.js 빌드 환경을 구축](https://github.com/Seo0H/seo0h.github.io/blob/main/.github/workflows/node.js.yml)했습니다.
